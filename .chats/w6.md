# instructions

## simple agent 构建

基于 @specs/w6/0001-simple-agent-design.md 的规范，使用 openai 构建一个 agent sdk，提供 agent 的核心功能，用户可以很方便地为 agent 添加自定义工具和 mcp。完成构建后，确保所有实现否符合 design spec，并提供几个 example 来展示如何使用（包含至少一个使用 mcp 的例子）。

## system prompt

based on @specs/w6/prompts/codex.txt and @specs/w6/prompts/reviewer.txt think hard, we want to generate a system prompt for
./w6/codereview-agent which is based on @w6/simple-agent/. The codereview agent will only have read file / write file / git command tool so make sure system prompt don't mention unexisting stuff. And make sure system prompt focused on code review but have all the good parts of @specs/w6/prompts/codex.txt. Write the prompts down to ./w6/codereview-agent/prompts/system.md. Think ultra hard.

## 构建 codereview agent design spec

根据 ./w6/codereview-agent/prompts/system.md 文档，以及 ./w6/simple-agent 代码，构建一个 codereview agent。它包含这些工具：

- read file：读取当前目录下某个文件的内容
- write file：写入当前目录下某个文件的内容
- git command：执行 git 命令，尤其是可以根据用户的各种需求，找到合适的 git diff，包括不限于：branch diff, unstaged diff, staged diff, commit diff, pull request diff, 等等
- gh command：执行 gh 命令，尤其是可以根据用户的各种需求，找到合适的 gh 命令，包括不限于：pr view, pr diff, 等等

这些工具的使用方法，相关的例子要更新在 system.md 中，这样 LLM 可以很方便地使用这些工具。

用户可以这样使用 codereview agent：

- 帮我 review 当前 branch 新代码
- 帮我 review commit 13bad5 之后的代码
- 帮我 review pull request 12 的代码

仔细考虑这些需求，构建一个 solid 的设计文档，文档放在 ./specs/w6/0003-codereview-agent-design.md 文件中。design doc 输出中文。
